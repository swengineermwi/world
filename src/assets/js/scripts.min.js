function Util() {} function resetFocusTabsStyle() { window.dispatchEvent(new CustomEvent('initFocusTabs')); }Util.hasClass = function (e, t) { return e.classList.contains(t); }, Util.addClass = function (e, t) { t = t.split(' '); e.classList.add(t[0]), t.length > 1 && Util.addClass(e, t.slice(1).join(' ')); }, Util.removeClass = function (e, t) { t = t.split(' '); e.classList.remove(t[0]), t.length > 1 && Util.removeClass(e, t.slice(1).join(' ')); }, Util.toggleClass = function (e, t, n) { n ? Util.addClass(e, t) : Util.removeClass(e, t); }, Util.setAttributes = function (e, t) { for (const n in t)e.setAttribute(n, t[n]); }, Util.getChildrenByClassName = function (e, t) { for (var n = e.children, i = [], o = 0; o < n.length; o++)Util.hasClass(n[o], t) && i.push(n[o]); return i; }, Util.is = function (e, t) { if (t.nodeType) return e === t; for (let n = typeof t === 'string' ? document.querySelectorAll(t) : t, i = n.length; i--;) if (n[i] === e) return !0; return !1; }, Util.setHeight = function (n, i, o, s, a, r) { function l(e) { var e = e - (c = c || e); let t = (s < e && (e = s), parseInt(e / s * d + n)); r && (t = Math[r](e, n, i - n, s)), o.style.height = `${t}px`, e < s ? window.requestAnimationFrame(l) : a && a(); } var d = i - n; var c = null; o.style.height = `${n}px`, window.requestAnimationFrame(l); }, Util.scrollTo = function (n, i, o, e) { function s(e) { var e = e - (l = l || e); const t = (i < e && (e = i), Math.easeInOutQuad(e, r, n - r, i)); a.scrollTo(0, t), e < i ? window.requestAnimationFrame(s) : o && o(); } var a = e || window; var r = a.scrollTop || document.documentElement.scrollTop; var l = null; e || (r = window.scrollY || document.documentElement.scrollTop); window.requestAnimationFrame(s); }, Util.moveFocus = function (e) { (e = e || document.getElementsByTagName('body')[0]).focus(), document.activeElement !== e && (e.setAttribute('tabindex', '-1'), e.focus()); }, Util.getIndexInArray = function (e, t) { return Array.prototype.indexOf.call(e, t); }, Util.cssSupports = function (e, t) { return CSS.supports(e, t); }, Util.extend = function () { const e = {}; let t = !1; let n = 0; const i = arguments.length; for (Object.prototype.toString.call(arguments[0]) === '[object Boolean]' && (t = arguments[0], n++); n < i; n++) { o = s = void 0; var o; var s = arguments[n]; for (o in s)Object.prototype.hasOwnProperty.call(s, o) && (t && Object.prototype.toString.call(s[o]) === '[object Object]' ? e[o] = extend(!0, e[o], s[o]) : e[o] = s[o]); } return e; }, Util.osHasReducedMotion = function () { let e; return !!window.matchMedia && !!(e = window.matchMedia('(prefers-reduced-motion: reduce)')) && e.matches; }, Math.easeInOutQuad = function (e, t, n, i) { return (e /= i / 2) < 1 ? n / 2 * e * e + t : -n / 2 * (--e * (e - 2) - 1) + t; }, Math.easeInQuart = function (e, t, n, i) { return n * (e /= i) * e * e * e + t; }, Math.easeOutQuart = function (e, t, n, i) { return e /= i, -n * (--e * e * e * e - 1) + t; }, Math.easeInOutQuart = function (e, t, n, i) { return (e /= i / 2) < 1 ? n / 2 * e * e * e * e + t : -n / 2 * ((e -= 2) * e * e * e - 2) + t; }, Math.easeOutElastic = function (e, t, n, i) { let o = 1.70158; let s = 0.7 * i; let a = n; return e == 0 ? t : (e /= i) == 1 ? t + n : (s = s || 0.3 * i, o = a < Math.abs(n) ? (a = n, s / 4) : s / (2 * Math.PI) * Math.asin(n / a), a * 2 ** (-10 * e) * Math.sin(2 * Math.PI * (e * i - o) / s) + n + t); }, (() => { const i = document.getElementsByClassName('js-tab-focus'); let e = !1; let t = !1; let n = !1; function o() { i.length > 0 && (a(!1), window.addEventListener('keydown', s)), window.removeEventListener('mousedown', o), n = !(t = !1); } function s(e) { e.keyCode === 9 && (a(!0), window.removeEventListener('keydown', s), window.addEventListener('mousedown', o), t = !0); } function a(e) { for (let t = e ? '' : 'none', n = 0; n < i.length; n++)i[n].style.setProperty('outline', t); } function r() { e ? n && a(t) : (e = i.length > 0, window.addEventListener('mousedown', o)); }r(), window.addEventListener('initFocusTabs', r); })(), (() => { function e(e) { this.element = e, this.list = this.element.getElementsByClassName('js-masonry__list')[0], this.items = this.element.getElementsByClassName('js-masonry__item'), this.activeColumns = 0, this.colStartWidth = 0, this.colWidth = 0, this.colGap = 0, this.colHeights = [], this.colItems = [], this.flexSupported = (e = this.items[0], window.getComputedStyle(e).getPropertyValue('flex-basis') != 'auto'), n(this), i(this); const t = this; t.flexSupported ? o(t) : t.element.classList.add('masonry--loaded'), t.element.addEventListener('masonry-resize', () => { n(t), i(t), t.flexSupported && s(t); }), t.element.addEventListener('masonry-reset', (e) => { n(t), i(t), t.flexSupported && o(t); }), document.fonts && (document.fonts.onloadingdone = function (e) { t.masonryLaid && (n(t), i(t), t.flexSupported) && s(t); }); } function n(e) { const t = window.getComputedStyle(e.items[0]); e.colStartWidth == 0 && (e.colStartWidth = parseFloat(t.getPropertyValue('width'))), e.colGap = parseFloat(t.getPropertyValue('margin-right')); } function i(e) { const t = parseFloat(window.getComputedStyle(e.element).getPropertyValue('width')); e.activeColumns = parseInt((t + e.colGap) / (e.colStartWidth + e.colGap)), e.activeColumns == 0 && (e.activeColumns = 1), e.colWidth = parseFloat((t - (e.activeColumns - 1) * e.colGap) / e.activeColumns); for (let n = 0; n < e.items.length; n++)e.items[n].style.width = `${e.colWidth}px`; } function s(e) { e.element.classList.add('masonry--loaded'), e.colHeights = [], e.colItems = []; for (var t = 0; t < e.activeColumns; t++)e.colHeights.push(0), e.colItems[t] = []; for (var n = 0; n < e.items.length; n++) { var i = Math.min.apply(Math, e.colHeights); var i = e.colHeights.indexOf(i); const o = (e.colItems[i] && e.colItems[i].push(n), e.items[n].style.flexBasis = 0, e.items[n].getBoundingClientRect().height || e.items[n].offsetHeight || 1); e.colHeights[i] = e.colHeights[i] + e.colGap + o; } for (var s = Math.max.apply(Math, e.colHeights) + 5, a = (e.list.style.cssText = `height: ${s}px;`, 0), n = 0; n < e.colItems.length; n++) { for (t = 0; t < e.colItems[n].length; t++)e.items[e.colItems[n][t]].style.order = a, a += 1; const r = e.items[e.colItems[n][e.colItems[n].length - 1]]; r && (r.style.flexBasis = `${s - e.colHeights[n] + r.getBoundingClientRect().height - 5}px`); }e.masonryLaid = !0, e.element.dispatchEvent(new CustomEvent('masonry-laid')); } function o(i) { const o = i.list.getElementsByTagName('img'); o.length == 0 ? s(i) : (function e() { for (var t = !1, n = 0; n < o.length; n++) if (!o[n].complete || o[n].naturalHeight != 0) { if (!o[n].complete) { t = !0; break; } if (void 0 !== o[n].naturalHeight && o[n].naturalHeight == 0) { t = !0; break; } }t ? setTimeout(() => { e(); }, 100) : s(i); }()); } let t; const a = document.getElementsByClassName('js-masonry'); const r = CSS.supports('flex-basis', 'auto'); const l = []; if (a.length > 0) { for (let d = 0; d < a.length; d++)r ? (t = d, l.push(new e(a[t]))) : a[d].classList.add('masonry--loaded'); if (!r) return; let c = !1; const u = new CustomEvent('masonry-resize'); function m() { for (let e = 0; e < l.length; e++)l[e].element.dispatchEvent(u); }window.addEventListener('resize', () => { clearTimeout(c), c = setTimeout(m, 500); }); } })(); { function Util() {} }Util.addClass = function (e, t) { t = t.split(' '); e.classList.add(t[0]), t.length > 1 && Util.addClass(e, t.slice(1).join(' ')); }, Util.removeClass = function (e, t) { t = t.split(' '); e.classList.remove(t[0]), t.length > 1 && Util.removeClass(e, t.slice(1).join(' ')); }, Util.getIndexInArray = function (e, t) { return Array.prototype.indexOf.call(e, t); }, Util.osHasReducedMotion = function () { let e; return !!window.matchMedia && !!(e = window.matchMedia('(prefers-reduced-motion: reduce)')) && e.matches; }, (() => { const o = document.getElementsByClassName('reveal-fx'); const t = 'IntersectionObserver' in window && 'IntersectionObserverEntry' in window && 'intersectionRatio' in window.IntersectionObserverEntry.prototype; if (o.length > 0) { if (Util.osHasReducedMotion() || !t) for (;o[0];) { const e = o[0].getAttribute('class').split(' ').filter((e) => e.lastIndexOf('reveal-fx--', 0) !== 0); o[0].setAttribute('class', e.join(' ').trim()), Util.removeClass(o[0], 'reveal-fx'); } else if (v(o[0])) for (let n = 0; n < o.length; n++)Util.addClass(o[n], 'reveal-fx--is-visible'); else { var s = window.innerHeight; var a = !1; var r = []; var i = (() => { for (var e = [], t = 0; t < o.length; t++)e.push(o[t].getAttribute('data-reveal-fx-delay') ? parseInt(o[t].getAttribute('data-reveal-fx-delay')) : 0); return e; })(); var l = (() => { for (var e = [], t = 0; t < o.length; t++)e.push(o[t].getAttribute('data-reveal-fx-delta') ? parseInt(o[t].getAttribute('data-reveal-fx-delta')) : 120); return e; })(); var d = (window.addEventListener('load', h), window.addEventListener('resize', u), window.addEventListener('restartAll', () => { if (!Util.osHasReducedMotion() && t && !v(o[0])) { o.length <= r.length && (window.addEventListener('load', h), window.addEventListener('resize', u)); for (var e = 0; e < d.length; e++)d[e] && d[e].disconnect(); d = []; for (e = 0; e < o.length; e++)Util.removeClass(o[e], 'reveal-fx--is-visible'); r = [], c(); } }), []); c(); } function c() { for (let e = 0; e < o.length; e++)d[e] = new IntersectionObserver(((e, t) => { let n; e[0].isIntersecting && (n = e[0].target, n = Util.getIndexInArray(o, n), r.indexOf(n) == -1 && (g(n), r.push(n), f(), a = !1), t.unobserve(e[0].target)); }), { rootMargin: `0px 0px -${l[e]}px 0px` }), d[e].observe(o[e]); } function u() { a || (a = !0, window.requestAnimationFrame ? window.requestAnimationFrame(m) : setTimeout(() => { m(); }, 250)); } function m() { s = window.innerHeight, h(); } function h() { for (var e, t, n, i = 0; i < o.length; i++)e = i, n = t = void 0, r.indexOf(e) == -1 && (t = o[e], n = e, t.getBoundingClientRect().top <= s - l[n]) && (g(e), r.push(e)); f(), a = !1; } function g(e) { i[e] && i[e] != 0 ? setTimeout(() => { Util.addClass(o[e], 'reveal-fx--is-visible'); }, i[e]) : Util.addClass(o[e], 'reveal-fx--is-visible'); } function v(e) { return window.getComputedStyle(e, '::before').getPropertyValue('content').replace(/'|"/g, '') != 'reveal-fx'; } function f() { o.length > r.length || (window.removeEventListener('load', h), window.removeEventListener('resize', u)); } } })(), (() => { function e(e) { this.element = e, this.delta = [!1, !1], this.dragging = !1, this.intervalId = !1, (e = this).element.addEventListener('mousedown', l.bind(e)), e.element.addEventListener('touchstart', l.bind(e), { passive: !0 }); } function l(e) { switch (e.type) { case 'mousedown': case 'touchstart': o = e, (i = this).dragging = !0; var t = i; t.element.addEventListener('mousemove', l.bind(t)), t.element.addEventListener('touchmove', l.bind(t), { passive: !0 }), t.element.addEventListener('mouseup', l.bind(t)), t.element.addEventListener('mouseleave', l.bind(t)), t.element.addEventListener('touchend', l.bind(t)), i.delta = [parseInt(c(o).clientX), parseInt(c(o).clientY)], u(i, 'dragStart', i.delta, o.target); break; case 'mousemove': case 'touchmove': r = e, (a = this).dragging && (window.requestAnimationFrame ? a.intervalId = window.requestAnimationFrame(d.bind(a, r)) : a.intervalId = setTimeout(() => { d.bind(a, r); }, 250)); break; case 'mouseup': case 'mouseleave': case 'touchend': var n; var t = this; var i = e; var o = t; var s = (o.intervalId && (window.requestAnimationFrame ? window.cancelAnimationFrame(o.intervalId) : clearInterval(o.intervalId), o.intervalId = !1), o.element.removeEventListener('mousemove', l.bind(o)), o.element.removeEventListener('touchmove', l.bind(o)), o.element.removeEventListener('mouseup', l.bind(o)), o.element.removeEventListener('mouseleave', l.bind(o)), o.element.removeEventListener('touchend', l.bind(o)), parseInt(c(i).clientX)); var i = parseInt(c(i).clientY); t.delta && (t.delta[0] || t.delta[0] === 0) && (n = m(s - t.delta[0]), Math.abs(s - t.delta[0]) > 30 && u(t, n < 0 ? 'swipeLeft' : 'swipeRight', [s, i]), t.delta[0] = !1), t.delta && (t.delta[1] || t.delta[1] === 0) && (n = m(i - t.delta[1]), Math.abs(i - t.delta[1]) > 30 && u(t, n < 0 ? 'swipeUp' : 'swipeDown', [s, i]), t.delta[1] = !1), u(t, 'dragEnd', [s, i]), t.dragging = !1; } let a; let r; var i; var o; } function d(e) { u(this, 'dragging', [parseInt(c(e).clientX), parseInt(c(e).clientY)]); } function c(e) { return e.changedTouches ? e.changedTouches[0] : e; } function u(e, t, n, i) { let o = !1; var i = (i && (o = i), new CustomEvent(t, { detail: { x: n[0], y: n[1], origin: o } })); e.element.dispatchEvent(i); } function m(e) { return Math.sign ? Math.sign(e) : (e > 0) - (e < 0) || +e; }window.SwipeContent = e; const t = document.getElementsByClassName('js-swipe-content'); if (t.length > 0) for (let n = 0; n < t.length; n++) new e(t[n]); })(), (() => { function e(e, t) { this.element = e, this.lightBoxId = `img-zoom-lightbox--${t}`, this.imgPreview = this.element.getElementsByClassName('js-image-zoom__preview')[0]; t = (t = (e = this).element.getAttribute('data-img')) || e.imgPreview.getAttribute('src'); let n; const i = document.createElement('div'); i.setAttribute('class', 'image-zoom__lightbox js-image-zoom__lightbox'), i.setAttribute('id', e.lightBoxId), i.setAttribute('aria-hidden', 'true'), i.innerHTML = `<img src="${t}" class="js-image-zoom__fw"></img>`, document.body.appendChild(i), e.element.insertAdjacentHTML('afterbegin', '<input aria-hidden="true" type="checkbox" class="image-zoom__input js-image-zoom__input"></input>'), this.lightbox = document.getElementById(this.lightBoxId), this.imgEnlg = this.lightbox.getElementsByClassName('js-image-zoom__fw')[0], this.input = this.element.getElementsByClassName('js-image-zoom__input')[0], this.animate = this.element.getAttribute('data-morph') != 'off', (n = this).imgPreview.addEventListener('click', (e) => { o(n, !0), n.input.checked = !0; }), n.lightbox.addEventListener('click', (e) => { o(n, !1), n.input.checked = !1; }), new SwipeContent(n.lightbox), n.lightbox.addEventListener('swipeDown', (e) => { o(n, !1), n.input.checked = !1; }), n.input.addEventListener('change', (e) => { o(n, n.input.checked); }), n.input.addEventListener('keydown', (e) => { (e.keyCode && e.keyCode == 13 || e.key && e.key.toLowerCase() == 'enter') && (n.input.checked = !n.input.checked, o(n, n.input.checked)); }); } function o(s, a) { n && s.animate ? window.requestAnimationFrame(() => { const n = s; const i = a; var e = n.imgPreview.getBoundingClientRect(); const t = n.lightbox.getBoundingClientRect().width; const o = i ? [e.top, e.left, e.width] : [0, 0, t]; var e = i ? [-e.top, -e.left, parseFloat(t / e.width)] : [e.top + n.lightbox.scrollTop, e.left, parseFloat(e.width / t)]; i && n.imgEnlg.setAttribute('style', `top: ${o[0]}px; left:${o[1]}px; width:${o[2]}px;`), n.lightbox.classList.remove('image-zoom__lightbox--no-transition'), n.lightbox.classList.add('image-zoom__lightbox--is-visible'), n.imgEnlg.addEventListener('transitionend', function e(t) { i || n.lightbox.classList.remove('image-zoom__lightbox--is-visible'), n.lightbox.classList.add('image-zoom__lightbox--no-transition'), n.imgEnlg.removeAttribute('style'), n.imgEnlg.removeEventListener('transitionend', e); }), n.imgEnlg.style.transform = `translateX(${e[1]}px) translateY(${e[0]}px) scale(${e[2]})`, n.lightbox.classList.toggle('image-zoom__lightbox--animate-bg', i); }) : s.lightbox.classList.toggle('image-zoom__lightbox--is-visible', a); } const t = document.getElementsByClassName('js-image-zoom'); var n = window.requestAnimationFrame && !window.matchMedia('(prefers-reduced-motion: reduce)').matches; if (t.length > 0) { for (var i = [], s = 0; s < t.length; s++)i.push(new e(t[s], s)); window.addEventListener('keydown', (e) => { if (e.keyCode && e.keyCode == 27 || e.key && e.key.toLowerCase() == 'esc') for (let t = 0; t < i.length; t++)i[t].input.checked = !1, i[t].lightbox.classList.contains('image-zoom__lightbox--is-visible') && o(i[t], !1); }); } })();
